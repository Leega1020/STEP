<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta charset="utf-8">
        <title>week4</title>
        <link rel="stylesheet" type="text/css" href="/static/layout.css">
    </head>
    <body>
        <div class="main">
            <div class="header"><h2>歡迎光臨，這是會員頁</h2></div>
            <div class="main"><h3>{{name}}，歡迎登入系統</h3></div>
            <a href="/signout">登出系統</a>
        </div>

        <br><hr>

        <div class="main"><h3>快來留言吧</h3>
            <form action="/creatMessage" method="POST" id="signcheck" class="in">
                內容<input type="text" name="content" id="input1"><br><br>
               
            <button class="sin">送出</button>  </form>
        </div>
        <br><hr>

        <div class="main">
          {% for message in messages %}
              <div class="message">
                  <span class="message-content"><strong>{{ message[0] }}</strong>: {{ message[1] }}</span>
                  {% if message[3] == session["member_id"] %}
                      <form action="/deleteMessage" method="POST" onsubmit="return confirm('確定刪除嗎?')">
                          <input type="hidden" name="message_id" value="{{ message[2] }}">
                          <button type="submit" class="delbtn">X</button>
                      </form>
                  {% endif %}
              </div>
          {% endfor %}
      </div>
      
      
      
        
        



    </body>
<!-- <script>
    document.addEventListener('DOMContentLoaded', () => {
        const deleteButtons = document.querySelectorAll('.delete-button');
      
        deleteButtons.forEach(button => {
          button.addEventListener('click', () => {
            console.log('Delete button clicked.');  // 检查点击事件是否触发
      
            const messageId = button.getAttribute('data-message-id');
            const shouldDelete = confirm('確定要刪除這條留言嗎？');
      
            if (shouldDelete) {
              fetch(`/delete-message/${messageId}`, { method: 'DELETE' })
                .then(response => response.text())
                .then(data => {
                  if (data === 'ok') {
                    location.reload();
                  } else {
                    console.error('删除留言失败');
                  }
                })
                .catch(error => console.error('发生错误：', error));
            }
          });
        });
      });
      
</script> -->
</html>    

